<!-- 	=========================================================
						SURVEY
	============================================================= -->

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Friend Finder Survey</title>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"></link>

	<!-- JQuery -->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"
  	integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  	crossorigin="anonymous"></script>

	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="style.css"></link>
</head>
<body>
<!-- 	=========================================================
						JUMBOTRON
	============================================================= -->

	<div class="container"> <!-- Open Container -->
		<div class="jumbotron">
			<h1 class="header" id="pageTitle">FRIEND FINDER SURVEY</h1>
			<hr>
			<h2>Take a quick survey to find out who you should be shackled to during battle in the Great Coliseum</h2>
			<a href="/"><button class=".btn-group-lg">Home</button></a>
		</div> <!-- Close Jumbotron -->


<!-- 	=========================================================
						SURVEY
	============================================================= -->
	<div class="row" id="surveySpan">

		<form class="question" name="quiz" id="quiz">
			<p>Name: </p>
			<input class="userInput" type="text" name="name" id="name"> <br>
			<p>Photo URL: </p>
			<input class="userInput" type="text" name="photoUrl" id="photoUrl">
	
			<p>How much do you like earl grey tea?</p>
		 	<input type="radio" name="question1" value=1> 1<br>
		 	<input type="radio" name="question1" value=2> 2<br>
		 	<input type="radio" name="question1" value=3> 3<br>
		 	<input type="radio" name="question1" value=4> 4<br>
		 	<input type="radio" name="question1" value=5> 5<br>		
			<br>

			<p>How many times have you seen Nacho Libre?</p>
		 	<input type="radio" name="question2" value=1> 1<br>
		 	<input type="radio" name="question2" value=2> 2<br>
		 	<input type="radio" name="question2" value=3> 3<br>
		 	<input type="radio" name="question2" value=4> 4<br>
		 	<input type="radio" name="question2" value=5> 5<br>		
			<br>

			<p>How many lava lamps do you need?</p>
		 	<input type="radio" name="question3" value=1> 1<br>
		 	<input type="radio" name="question3" value=2> 2<br>
		 	<input type="radio" name="question3" value=3> 3<br>
		 	<input type="radio" name="question3" value=4> 4<br>
		 	<input type="radio" name="question3" value=5> 5<br>		
			<br>

			<p>How many condiments do you need for each meal?</p>
		 	<input type="radio" name="question4" value=1> 1<br>
		 	<input type="radio" name="question4" value=2> 2<br>
		 	<input type="radio" name="question4" value=3> 3<br>
		 	<input type="radio" name="question4" value=4> 4<br>
		 	<input type="radio" name="question4" value=5> 5<br>		
			<br>

			<p>Shoes?</p>
		 	<input type="radio" name="question5" value=1> 1<br>
		 	<input type="radio" name="question5" value=2> 2<br>
		 	<input type="radio" name="question5" value=3> 3<br>
		 	<input type="radio" name="question5" value=4> 4<br>
		 	<input type="radio" name="question5" value=5> 5<br>		
			<br>

			<p>How well can you cartwheel?</p>
		 	<input type="radio" name="question6" value=1> 1<br>
		 	<input type="radio" name="question6" value=2> 2<br>
		 	<input type="radio" name="question6" value=3> 3<br>
		 	<input type="radio" name="question6" value=4> 4<br>
		 	<input type="radio" name="question6" value=5> 5<br>		
			<br>

			<p>Which season of Pretty Little Liars are you currently watching?</p>
		 	<input type="radio" name="question7" value=1> 1<br>
		 	<input type="radio" name="question7" value=2> 2<br>
		 	<input type="radio" name="question7" value=3> 3<br>
		 	<input type="radio" name="question7" value=4> 4<br>
		 	<input type="radio" name="question7" value=5> 5<br>		
			<br>

			<p>Which question is this?</p>
		 	<input type="radio" name="question8" value=1> 1<br>
		 	<input type="radio" name="question8" value=2> 2<br>
		 	<input type="radio" name="question8" value=3> 3<br>
		 	<input type="radio" name="question8" value=4> 4<br>
		 	<input type="radio" name="question8" value=5> 5<br>		
			<br>

			<p>Tyler is a nerd with glasses, sometimes referred to as "_____ eyes."</p>
		 	<input type="radio" name="question9" value=1> 1<br>
		 	<input type="radio" name="question9" value=2> 2<br>
		 	<input type="radio" name="question9" value=3> 3<br>
		 	<input type="radio" name="question9" value=4> 4<br>
		 	<input type="radio" name="question9" value=5> 5<br>		
			<br>

			<p>The gestation period for the Nine-banded Armadillo is approximately ___ months.</p>
		 	<input type="radio" name="question10" value=1> 1<br>
		 	<input type="radio" name="question10" value=2> 2<br>
		 	<input type="radio" name="question10" value=3> 3<br>
		 	<input type="radio" name="question10" value=4> 4<br>
		 	<input type="radio" name="question10" value=5> 5<br>
			<br>
				
				
			<input type="submit" id="submitButton" class=".btn-group-lg" value="Done"> 
		</form>

<!-- 	=========================================================
						FOOTER
	============================================================= -->
	</div>

		<div class="row" id="footer">
			<hr>
			<a class="footerLink" href="">Friends API</a> 
			<a class="footerLink" href="https://github.com/atpdev14/FriendFinder">Github Repo</a>
		</div>
	</div> <!-- Close Container -->


	<script>
		// take all info collected from the form and add it to a new object
		// use a post request to add the new object to the api
		//loop through all objects in the array and total up their scores from the questionnaire
		//find the user with the closest score and display them as a match
			// -subtract all other user totals from the new user's total
			// -if the difference is a negative integer, convert it to positive
			// -the user with the smallest integer difference is the best match

			$("#submitButton").on("click", function(event) {
      			event.preventDefault();
      			alert("Submitted");
      			var newUser = {
        			name: $("#name").val(),
        			photoUrl: $("#photoUrl").val(),
        			scores: [],
        			total: 0
      			};


      			//Loop through all survey answers and push their values into an array.  Find the total.
      			for(i = 1; i < 11; i++){
      				var currentQuestion = "question" + i;
      				var currentQuestionValue = document.getElementById("quiz").elements[currentQuestion].value;
      				newUser.scores.push(currentQuestionValue);
      				newUser.total = newUser.total + parseInt(currentQuestionValue);
      			};

			     $.post("/api/new", newUser)
			      .done(function(data) {
			        $.get("/findfriend", function(findFriendData){
			        	alert("Congratulations " + newUser.name + "!  Your partner in the Great Coliseum will be " + findFriendData + "!");
			        });
			      });

			      
    		});
	</script>
	</body>
</html>  












